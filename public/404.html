<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title></title>
      <link rel="icon" type="image/png" href="/media/website/skyhawks_logo_CAP_transparent.png">
      <link rel="stylesheet" href="assets/stylesheets/main.css">
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <script src="https://skyhawk.cap.gov/core/libraries/jquery/assets/3.3.1/jquery.min.js"></script>
      <script src="https://skyhawk.cap.gov/assets/javascripts/main-3e47b52a9c95aa9cd957b34befd0acf5.min.js"></script>
      <script src="https://skyhawk.cap.gov/core/public/shared/assets/js/jquery.cycle2/2.1.6/jquery.cycle2-fef2f3645726cce4154911d6140d7d52.min.js"></script>
      <script type="module">
         import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
         import {
           initializeFirestore,
           persistentLocalCache,
           persistentMultipleTabManager,
           collection,
           doc,
           getDoc,
           getDocs
         } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

         const firebaseConfig = {
           apiKey: "AIzaSyBk_ikYB1PzkgHx4zJY73pe3EfzQRpZvqw",
           authDomain: "skyhawk-web.firebaseapp.com",
           projectId: "skyhawk-web",
           storageBucket: "skyhawk-web.firebasestorage.app",
           messagingSenderId: "340655139001",
           appId: "1:340655139001:web:7923a1fe83ac4a4c689368",
           measurementId: "G-M2RSE2BRK2"
         };

         const app = initializeApp(firebaseConfig);

         const db = initializeFirestore(app, {
           cache: persistentLocalCache({
             tabManager: persistentMultipleTabManager()
           })
         });

        /* ===============================
           LOAD PAGE (CACHE â†’ NETWORK)
        =============================== */
        async function loadPage(sectionId, onUpdate) {
          const cacheKey = `pageData_${sectionId}`;
          const cachedRaw = localStorage.getItem(cacheKey);

          if (cachedRaw) {
            try {
              const cached = JSON.parse(cachedRaw);
              onUpdate(cached); // ðŸ”¥ INSTANT render
            } catch {}
          }

          // --- Always revalidate in background ---
          const pageSnap = await getDoc(doc(db, "pages", sectionId));
          if (!pageSnap.exists()) return;

          const childrenSnap = await getDocs(
            collection(db, `pages/${sectionId}/children`)
          );

          const fresh = {
            id: sectionId,
            title: pageSnap.data().title,
            children: {}
          };

          childrenSnap.forEach(c => {
            const d = c.data();
            fresh.children[d.slug] = {
              title: d.title,
              slug: d.slug,
              content: d.content,
              externalUrl: d.externalUrl || null
            };
          });

          // Only update if data changed
          if (JSON.stringify(fresh) !== cachedRaw) {
            localStorage.setItem(cacheKey, JSON.stringify(fresh));
            onUpdate(fresh); // ðŸ” Re-render with fresh data
          }
        }

        /* ===============================
           RENDER
        =============================== */
        function renderPage(pageData) {
          if (!pageData) return;

          const params = new URLSearchParams(location.search);
          const [, childSlug] = (params.get("page") || "").split("/");

          const children = Object.values(pageData.children);
          const active = children.find(c => c.slug === childSlug) || children[0];

          // Side nav
          const sideList = document.getElementById("sideNavList");
          const sideTitle = document.getElementById("sideNavTitleLink");
          sideTitle.textContent = pageData.title;
          sideTitle.href = `/page?page=${pageData.id}`;
          sideList.innerHTML = "";

          children.forEach(c => {
            const li = document.createElement("li");
            li.className = "left-nav-list-item";

            const a = document.createElement("a");
            a.className = "left-nav-list-link";
            a.href = `/page?page=${pageData.id}/${c.slug}`;
            a.textContent = c.title;
            if (c.slug === active.slug) a.classList.add("selected");

            li.append(a, document.createElement("div"));
            sideList.appendChild(li);
          });

          // Content
          document.getElementById("pageTitle").textContent = active.title;

          if (active.externalUrl) {
            location.href = active.externalUrl;
          } else {
            document.getElementById("pageContent").innerHTML = active.content;
          }
        }

        /* ===============================
           INIT
        =============================== */
        document.addEventListener("DOMContentLoaded", () => {
          const sectionId = (new URLSearchParams(location.search).get("page") || "")
            .split("/")[0];

          if (!sectionId) return;

          document.getElementById("pageContent").textContent = "Loading...";

          loadPage(sectionId, renderPage);
        });
      </script>
      <script type="module">

         // --------------------
         // Cache-first loader
         // --------------------
         async function loadDocOrCache(pathSegments, cacheKey) {
           const cached = localStorage.getItem(cacheKey);
           if (cached) {
             try { return JSON.parse(cached); } catch {}
           }

           try {
             const ref = doc(db, ...pathSegments);
             const snap = await getDoc(ref);
             if (snap.exists()) {
               const data = snap.data();
               localStorage.setItem(cacheKey, JSON.stringify(data));
               return data;
             }
           } catch (err) {
             console.warn(`Failed to load ${pathSegments.join("/")}`, err);
           }
           return null;
         }

         async function loadCollectionOrCache(pathSegments, cacheKey) {
           const cached = localStorage.getItem(cacheKey);
           if (cached) {
             try { return JSON.parse(cached); } catch {}
           }

           try {
             const colRef = collection(db, ...pathSegments);
             const snap = await getDocs(colRef);
             const data = snap.docs.map(d => d.data());
             localStorage.setItem(cacheKey, JSON.stringify(data));
             return data;
           } catch (err) {
             console.warn(`Failed to load collection ${pathSegments.join("/")}`, err);
           }
           return [];
         }

         // --------------------
         // Render functions
         // --------------------
         function renderUnit(unit) {
           if (!unit) return;
           document.title = unit.name;
           const el = document.getElementById("unit-name");
           if (el) el.textContent = `${unit.name} (${unit.designation})`;
         }

         function renderContact(contact) {
           if (!contact) return;
           const addrEl = document.getElementById("address");
           if (addrEl) addrEl.innerHTML = contact.address.replace(/\n/g, "<br>");

           const phoneEl = document.getElementById("phone");
           if (phoneEl) {
             phoneEl.href = `tel:${contact.phone}`;
             phoneEl.textContent = contact.phone;
           }

           const emailEl = document.getElementById("email");
           if (emailEl) {
             emailEl.innerHTML = `<a href="mailto:${contact.email}">${contact.email}</a>`;
           }
         }

        async function renderMenu() {
           const menuRoot = document.getElementById("main-menu");
           if (!menuRoot) return;

           // 1ï¸âƒ£ Try to load menu from localStorage first
           let pagesData = JSON.parse(localStorage.getItem("menuPages") || "null");

           if (pagesData) {
             buildMenu(pagesData, menuRoot);
           }

           // 2ï¸âƒ£ Fetch fresh menu from Firestore (in background)
           try {
             const pagesCollection = collection(db, "main", "menu", "pages");
             const pagesSnap = await getDocs(pagesCollection);

             const pagesWithChildren = await Promise.all(
               pagesSnap.docs.map(async pageDoc => {
                 const childrenSnap = await getDocs(collection(pagesCollection, pageDoc.id, "children"));
                 return {
                   page: pageDoc.data(),
                   children: childrenSnap.docs.map(d => d.data())
                 };
               })
             );

             // Save to cache
             localStorage.setItem("menuPages", JSON.stringify(pagesWithChildren));

             // Rebuild menu (replace existing)
             menuRoot.innerHTML = "";
             buildMenu(pagesWithChildren, menuRoot);

           } catch (err) {
             console.warn("Failed to load menu from Firestore", err);
           }
         }

         // Helper: build menu from data
         function buildMenu(pagesWithChildren, menuRoot) {
           const fragment = document.createDocumentFragment();

           pagesWithChildren.forEach(({ page, children }) => {
             const li = document.createElement("li");
             li.className = "main-li";
             li.id = `menu-item-${page.id || page.title}`;

             const a = document.createElement("a");
             a.href = page.url || "#";
             a.textContent = page.title;
             a.target = "_self";
             a.className = "main-nav-link";
             li.appendChild(a);

             if (children?.length) {
               li.classList.add("has-dropdown");
               const dropdown = document.createElement("div");
               dropdown.className = "dropdown-container";

               const ul = document.createElement("ul");
               ul.className = "dropdown-list";

               children.forEach(child => {
                 const cli = document.createElement("li");
                 const ca = document.createElement("a");
                 ca.href = child.url || "#";
                 ca.textContent = child.title;
                 ca.target = "_self";
                 cli.appendChild(ca);
                 ul.appendChild(cli);
               });

               dropdown.appendChild(ul);
               li.appendChild(dropdown);
             }

             fragment.appendChild(li);
           });

           menuRoot.appendChild(fragment);

           // Dropdown hover (jQuery)
           if (window.jQuery) {
             jQuery('.main-li.has-dropdown').each(function () {
               const $item = jQuery(this);
               $item.off('mouseenter mouseleave');
               $item.on('mouseenter', function () { $item.addClass('open'); });
               $item.on('mouseleave', function () { $item.removeClass('open'); });
             });
           }
         }


         // Footer quick links
         function renderQuickLinks(links) {
           if (!links?.length) return;
           const root = document.getElementById("footer-quick-links");
           if (!root) return;

           links.forEach(link => {
             const li = document.createElement("li");
             li.className = "footer-links-list-item";

             const a = document.createElement("a");
             a.className = "footer-link footer-list-item-link";
             a.href = link.url;
             a.textContent = link.title;
             a.target = link.external === "true" ? "_blank" : "_self";
             if (link.external === "true") a.rel = "noopener noreferrer";

             li.appendChild(a);
             root.appendChild(li);
           });
         }

         // --------------------
         // INIT
         // --------------------
         document.addEventListener("DOMContentLoaded", async () => {
           // Fire all loads in parallel (cache-first)
           const [unit, contact, quickLinks] = await Promise.all([
             loadDocOrCache(["main", "unit"], "unit"),
             loadDocOrCache(["main", "contact"], "contact"),
             loadCollectionOrCache(["main", "quickLinks", "children"], "quickLinks")
           ]);

           renderUnit(unit);
           renderContact(contact);
           renderQuickLinks(quickLinks);

           // Menu can load in background without blocking DOM
           renderMenu();
         });
         const menu = document.querySelector('.desktop-navigation-menu');
      </script>
      <script src="assets/js/admin.js"></script>

   </head>
   <body>
      <div class="header-section">
         <div data-collapse="medium" data-animation="default" data-duration="400" class="nav-section w-nav">
            <div class="header-contents-wrap">
               <div class="header-container w-container">
                  <div class="logo-container">
                     <a href="/" class="logo w-clearfix w-nav-brand"> <img src="/assets/images/CAP-2017-logo-horizontal-optimized.png" alt="Skyhawk Composite Squadron" class="logo-image"> </a>
                     <h2 class="website-tagline" id="unit-name"></h2>
                  </div>
                  <div class="header-content-right-wrap">
                     <a href="https://skyhawk.gocivilairpatrol.org/ways-to-give" id="donations-button" class="donations-btn">
                        <div class="donations-btn-image">
                           <div class="donations-btn-ripple"></div>
                           <img src="/assets/images/heart.svg" alt="">
                        </div>
                        <div class="donations-btn-text">
                           Ways to Give
                        </div>
                     </a>
                     <div class="website-logo-container">
                        <img src="/media/website/skyhawks_logo_CAP_transparent.png" alt="Skyhawk Composite Squadron" class="website-logo">
                     </div>
                     <a href="#main-content" class="cms_form_button primary skip-to-main-content sronly">Skip to main content</a>
                  </div>
               </div>
               <nav class="header-menu-wrap">
                  <div class="header-menu-inside-wrap">
                     <div class="nav-container w-container">
                        <button id="mobile-menu-toggle" aria-label="Menu" class="mobile-menu-btn">
                          â˜°
                        </button>
                        <nav class="desktop-navigation-menu">
                           <ul class="main-ul" id="main-menu"></ul>
                           <div class="link-block site-share-wrapper w-hidden-medium w-hidden-small w-hidden-tiny">
                              <a href="" class="w-inline-block w--current" id="load-site-share"> <img src="/assets/images/share-icon.png" alt="Share" class="share-icon"> </a>
                              <nav class="nav-drop-list w-dropdown-list">
                                 <a href="mailto:?subject=Sitemap&amp;body=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap" class="nav-drop-list-link">Email this page</a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap&amp;t=Sitemap" class="nav-drop-list-link" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap&amp;t=Sitemap'); return false;" target="_blank">Share on Facebook</a> <a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap&amp;text=" class="nav-drop-list-link" onclick="window.open('https://twitter.com/intent/tweet?text=Sitemap https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap'); return false;" title="Share on X (formerly Twitter)" target="_blank">Share on X</a> <a href="https://www.linkedin.com/sharing/share-offsite?mini=true&amp;summary=Sitemap&amp;source=Civil%20Air%20Patrol&amp;url=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap&amp;subject=Sitemap" class="nav-drop-list-link" onclick="window.open('https://www.linkedin.com/sharing/share-offsite?mini=true&amp;summary=Sitemap&amp;source=Civil%20Air%20Patrol&amp;url=https%3A%2F%2Fskyhawk%2Ecap%2Egov%2Fsitemap&amp;subject=Sitemap'); return false;">Share on LinkedIn</a>
                              </nav>
                           </div>
                        </nav>
                     </div>
                  </div>
               </nav>
            </div>
            <div class="w-nav-overlay" data-wf-ignore=""></div>
         </div>
      </div>
<div class="inside-content-section section-wrap">
    <div class="inside-content-beckground no-columns">
     <div class="inside-row w-row">
      <div class="main-content-column w-col w-col-12 w-col-stack">
       <div class="inside-page-header-content-wrap">
        <nav>
         <ol class="breadcrumb-list w-clearfix w-list-unstyled">
          <li class="breadcrumb-list-item"><a class="breadcrumb-link link" href="/">Home</a>
           <div class="breadcrumb-divider">
            /
           </div></li>
         </ol>
        </nav>
       </div>
       <div class="landing-page-title-wrapper">
        <h1 class="h1-heading">The Page You Requested is No Longer Available</h1>
       </div>
       <div class="inside-row-nested w-row">
        <div class="main-content-column-nested w-col w-col-12 w-col-stack">
         <div class="main-content-wrap nested-content-wrap">
          <div id="session-message-wrapper">
          </div>
          <p>You may not be able to find this page because of:</p>
          <ul>
           <li>An out-of-date bookmark or favorite</li>
           <li>A search engine that has an out-of-date listing for us</li>
           <li>A mistyped address</li>
          </ul>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
      </div>
      <div class="footer-section">
         <div class="middle-footer-div">
            <div class="footer-container">
               <div class="footer-row row">
                  <div class="_1 footer-column-wrap">
                     <h4 class="footer-column-title">Address</h4>
                     <p id="address" class="footer-paragraph"></p>
                     <p class="footer-paragraph" x-ms-format-detection="none"><span id="phone" class="w-hidden-medium w-hidden-small w-hidden-tiny" x-ms-format-detection="none"></span></p>
                     <p id="email" class="footer-paragraph"></p>
                  </div>
                  <div class="_3 footer-column-wrap">
                     <h4 class="footer-column-title">Mission Statement</h4>
                     <div class="footer-paragraph">
                        Volunteers serving America's communities, saving lives, and shaping futures.
                     </div>
                  </div>
                  <div class="_2 footer-column-wrap">
                    <h4 class="footer-column-title">Quick Links</h4>
                    <ul
                      id="footer-quick-links"
                      class="footer-links-list w-list-unstyled">
                    </ul>
                  </div>

               </div>
            </div>
         </div>
         <div class="container footer w-container"></div>
         <div class="footer-signoff-section">
            <div class="bottom-footer-container">
               <div class="footer-signoff-row row w-row">
                  <div class="column w-col w-col-9 w-col-stack">
                     <div id="copyright-text" class="copyright-text">
                        Â© 2026 Civil Air Patrol. All rights reserved.
                     </div>
                     <ul class="footer-signoff-list w-list-unstyled">
                        <li class="footer-signoff-list-item"><a href="https://get.adobe.com/reader/" target="_blank" rel="noopener" class="footer-link">Get Adobe Acrobat Reader</a></li>
                        <li class="footer-signoff-list-item"><a href="https://www.gocivilairpatrol.com/legal-privacy-statement" target="_blank" rel="noopener" class="footer-link">Legal &amp; Privacy Statement</a></li>
                     </ul>
                  </div>
                  <div class="column w-clearfix w-col w-col-3 w-col-stack">
                     <div class="footer-signoff-grip w-inline-block">
                        <div id="GRIPFooterLogo" style="padding-top: 10px;">
                           <span id="GRIPFooterLogoText" style="
                              color: #919293;
                              font-size: 10px;
                              font-family: Arial, sans-serif;
                              text-transform: uppercase;
                              display: block;
                              text-align: left;
                              font-weight: 700;
                              letter-spacing: 0.02rem;
                              ">
                           WEB DEVELOPMENT BY <a href="" target="_blank" rel="noopener noreferrer" style="
                              color: #919293;
                              text-decoration: underline;
                              ">ETHAN LARSON</a>
                           </span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>